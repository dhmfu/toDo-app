<div class="todo-list">
  <form name="taskForm" ng-submit="taskForm.$valid && $ctrl.addTask()" novalidate>
    <div class="task-details">
      <input ng-model="$ctrl.newTask.desription" placeholder="Write down your task" autofocus required>
      <div class="input-error">Task can't be empty</div>
      <select ng-model="$ctrl.newTask.priority" class="label" ng-class="{'label-danger' : $ctrl.newTask.priority == 'High', 'label-success' : $ctrl.newTask.priority == 'Low'}">
        <option value="Low" class="label-success">Low</option>
        <option value="High" class="label-danger">High</option>
      </select>
    </div>
    <button type="submit" ng-if="$ctrl.newTask.desription" class="task-add"></button>
  </form>
  <div>
    <div class="task" ng-repeat="task in $ctrl.tasks" ng-init="showRemove=false" ng-mouseenter="showRemove=true" ng-mouseleave="showRemove=false">
      <div class="task-complete">
        <input type="checkbox" ng-model="task.completed">
      </div>
      <span class="remove" ng-click="$ctrl.remove(task)" ng-if="showRemove" ng-init="editing = false"></span>
      <div class="task-description task-view" title="double-click to edit" ng-dblclick="editing = !editing">
        <span ng-bind="task.desription" class="description" ng-class="{'task-completed' : task.completed}" ng-if="!editing"></span>
        <span class="label label-default" ng-class="{'label-danger' : (task.priority == 'High' && !task.completed), 'label-success' : (task.priority == 'Low' && !task.completed)}" ng-bind="task.priority" ng-if="!editing"></span>
        <input ng-model="task.desription" ng-if="editing">
        <select ng-model="task.priority" class="label" ng-class="{'label-danger' : task.priority == 'High', 'label-success' : task.priority == 'Low'}" ng-if="editing">
          <option value="Low" class="label-success">Low</option>
          <option value="High" class="label-danger">High</option>
        </select>
      </div>
    </div>
  </div>
  <div ng-if="$ctrl.tasks.length">
    <div class="info">
      <span ng-bind="$ctrl.completedTasks()"></span> of <span ng-bind="$ctrl.tasks.length"></span> tasks completed
    </div>
    <div class="button-footer">
      <button type="button" ng-click="$ctrl.selectAll()" class="btn btn-default pull-right" ng-bind="$ctrl.selectAll_button()"></button>
      <button type="button" ng-click="$ctrl.removeCompleted()" ng-if="$ctrl.completedTasks()" class="btn btn-default pull-left">Remove completed</button>
    </div>
  </div>
</div>
